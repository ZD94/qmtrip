<!DOCTYPE html>
<html ng-app="tulingdao.com">
<head>
    <meta charset="UTF-8">
    <title ng-bind="pageTitle"></title>
    <link rel="stylesheet" type="text/css" href="/staff/css/public.css">
    <link rel="stylesheet" type="text/css" href="/staff/css/businesstravel.css">
    <link rel="stylesheet" type="text/css" href="/staff/css/users.css">
    <link rel="stylesheet" type="text/css" href="/staff/css/auth.css"/>
    <script type="text/javascript" src="/script/libs/bundle.jquery.js"></script>
    <script type="text/javascript">
        var jQuery = $ = require('jquery');
        require("jquery-ui");
    </script>
    <script type="text/javascript" src="/script/libs/bundle.angular.js"></script>
    <script type="text/javascript" src="/script/libs/bundle.api.js"></script>
    <script type="text/javascript" src="/script/libs/api.js"></script>
    <script type="text/javascript" src="/script/libs/ngapp.js"></script>
    <script type="text/javascript" src="/script/messagebox.js"></script>
    <script type="text/javascript" src="/script/selectbox.js"></script>
    <script type="text/javascript" src="/staff/controller.all.js"></script>
    <script type="text/javascript">
        var Q = require('q');
        var moment = require('moment');
        var TLD = TLD_angular_app('tulingdao.com');
        //获取页面基本信息
        TLD.config(function ($stateProvider) {
            $stateProvider
                    .state("auth", {
                        url        : "/auth/:path",
                        controller : function($route, $stateParams, $location, $scope, $sce) {
                            $stateParams.path = 'auth/'+$stateParams.path;
                            return TLD_angular_app_defaultController($route, $stateParams, $location, $scope, $sce);
                        },
                        templateUrl: function (params) {
                            console.log('state auth', params);
                            return '/staff/auth/' + params.path + ".html";
                        }
                    })
                    .state("root", {
                        url        : "",
                        abstract: true,
                        controller : TLD_angular_app_defaultController,
                        templateUrl: function(params) {
                            console.log('state root', params);
                            return '/staff/index.html';
                        }
                    })
                    .state("root.content", {
                        url        : "/*path",
                        controller : TLD_angular_app_defaultController,
                        templateUrl: function (params) {
                            console.log('state root.content', params);
                            return '/staff/' + params.path + ".html";
                        }
                    });
        });
        API.onlogin(function () {
            var backUrl = window.location.href;
            backUrl = encodeURIComponent(backUrl);
            window.location.href = "/staff.html#/auth/login?backurl=" + backUrl;
        });
        // function logout(){
        // 	API.require('auth');
        // 	API.onload(function(){
        // 		API.auth.logout()
        // 				.then(function (data) {
        // 					location.reload();
        // 				}).catch(function(error){
        // 			console.log(error);
        // 		}).done();
        // 	});
        // };
    </script>
</head>
<body>
<div id="angular-view" ui-view></div>
<div class="footer">
    <p>由途灵岛信息股份有限公司提供技术支持</p>
    <p>联系电话：010-57371105</p>
</div>
</body>
</html>