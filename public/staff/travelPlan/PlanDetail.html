<style>html,body {background: #F5F5F5;}</style>
<div class="travel-plan">
    <div class="planDetail">
        <div class="planpath">我的账户&nbsp;>&nbsp;我的出差记录&nbsp;>&nbsp;<span>出差详情页</span></div>
        <div class="mainbox">
            <div class="title_top">
                <table width="100%">
                    <tr>
                        <td width="220" height="40" align="left" style="font-size: 13px;">生成时间：{{planDetail.createAt | date: 'yyyy-MM-dd HH:mm'}}</td>
                        <td height="40" align="center">您于
                            <span ng-if="planDetail.startAt">{{planDetail.startAt | date: 'yyyy月MM月dd日'}}</span>
                            <span ng-if="!planDetail.startAt">{{planDetail.hotel[0].startTime | date: 'yyyy月MM月dd日'}}</span>
                            的出差状况
                        </td>
                        <td width="220" height="40" align="right">{{planDetail.description}}</td>
                    </tr>
                </table>
            </div>
            <div class="content_top">
                <dl>
                    <dt>动态标准预算</dt>
                    <dd>
                        <span ng-if="!planDetail.budget">无</span>
                        <span ng-if="planDetail.budget">¥{{planDetail.budget.toFixed(2)}}</span>
                    </dd>
                </dl>
                <dl>
                    <dt>实际支出</dt>
                    <dd>
                        <span ng-if="!planDetail.expenditure">无</span>
                        <span ng-if="planDetail.expenditure">¥{{planDetail.expenditure.toFixed(2)}}</span>
                    </dd>
                </dl>
                <dl>
                    <dt>为公司节省</dt>
                    <dd>
                        <span ng-if="!planDetail.expenditure">无</span>
                        <span ng-if="planDetail.expenditure">
                            <span ng-if="planDetail.budget-planDetail.expenditure>0">¥{{(planDetail.budget-planDetail.expenditure).toFixed(2)}}</span>
                            <span ng-if="planDetail.budget-planDetail.expenditure<=0">¥0.00</span>
                        </span>
                    </dd>
                </dl>
                <dl>
                    <dt>获得积分</dt>
                    <dd>无</dd>
                </dl>
            </div>
            <div class="title_bottom"><span></span>差旅消费明细</div>
            <div id="img"></div>
            <div class="content_bottom">
                <table width="100%" border="1" bordercolor="#E5E5E5">
                    <tr>
                        <th height="40">明细</th>
                        <th width="145" height="40">预算</th>
                        <th width="145" height="40">实际支出</th>
                        <th width="145" height="40">出差票据</th>
                    </tr>
                    <tr ng-if="planDetail.outTraffic.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #CF2520;">&#xe90e;</div>
                            <div class="startplace">{{outTraffic.startPlace}}</div>
                            <div class="description">{{outTraffic.startTime | date: 'yyyy-MM-dd'}}<span ng-if="outTraffic.latestArriveTime!=undefined && outTraffic.latestArriveTime!=''">&nbsp;&nbsp;&nbsp;最晚&nbsp;{{outTraffic.latestArriveTime | date: 'yyyy-MM-dd HH:mm'}}&nbsp;到达</span></div>
                            <div class="endplace">{{outTraffic.arrivalPlace}}</div>
                        </td>
                        <td align="center">¥{{outTraffic.budget.toFixed(2)}}</td>
                        <td align="center">
                            <span ng-if="outTraffic.expenditure">¥{{outTraffic.expenditure.toFixed(2)}}</span>
                            <span ng-if="!outTraffic.expenditure">无</span>
                        </td>
                        <td align="center" class="po_r">
                                <input type="button" class="common_btn1 uploadbtn" value="上传" ng-if="outTraffic.invoice.length==0">
                            <input type="file" class="file" name="tmpFile" value='' id="i_outTraffic" ref="{{outTraffic.id}}" data-type = "1" ng-if="outTraffic.invoice.length==0">
                            <div ng-if="outTraffic.invoice.length!=0">
                                <p ng-if="outTraffic.status=='-1'">
                                    <input type="button" class="common_btn1 uploadbtn" value="重新上传">
                                    <input type="file" class="file" name="tmpFile" value='选择文件' id="i_hotel" ref="{{outTraffic.id}}" data-type = "2">
                                </p>
                                <p ng-if="outTraffic.status=='-1'">【审核未通过】</p>
                                <p ng-if="outTraffic.status==0" style="color: #CF2520;">【待审核】</p>
                                <p ng-if="outTraffic.status==1"><span class="tongguo web-icon-font2">&#xe9ec;</span></p>
                                <p ng-if="outTraffic.status!='-1'"><a ng-click="goDetail('outTraffic',outTraffic.newInvoice)">去程交通票据</a></p>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="planDetail.hotel.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #5248C8;">&#xe914;</div>
                            <div class="hoteldescription">
                                <p><span>入住地：</span>{{hotel.city}}&nbsp;{{hotel.hotelName}}附近</p>
                                <p><span>入住日期：</span>{{hotel.startTime | date: 'yyyy-MM-dd'}}&nbsp;&nbsp;&nbsp;&nbsp;<span>退房日期：</span>{{hotel.endTime | date: 'yyyy-MM-dd'}}</p>
                            </div>
                        </td>
                        <td align="center">¥{{hotel.budget.toFixed(2)}}</td>
                        <td align="center">
                            <span ng-if="hotel.expenditure">¥{{hotel.expenditure.toFixed(2)}}</span>
                            <span ng-if="!hotel.expenditure">无</span>
                        </td>
                        <td align="center" class="po_r">
                            <input type="button" class="common_btn1 uploadbtn" value="上传" ng-if="hotel.invoice.length==0">
                            <input type="file" class="file" name="tmpFile" value='选择文件' id="i_hotel" ref="{{hotel.id}}" data-type = "2" ng-if="hotel.invoice.length==0">
                            <div ng-if="hotel.invoice.length!=0">
                                <p ng-if="hotel.status=='-1'">
                                    <input type="button" class="common_btn1 uploadbtn" value="重新上传">
                                    <input type="file" class="file" name="tmpFile" value='选择文件' id="i_hotel" ref="{{hotel.id}}" data-type = "2">
                                </p>
                                <p ng-if="hotel.status=='-1'">【审核未通过】</p>
                                <p ng-if="hotel.status==0" style="color: #CF2520;">【待审核】</p>
                                <p ng-if="hotel.status==1"><span class="tongguo web-icon-font2">&#xe9ec;</span></p>
                                <p ng-if="hotel.status!='-1'"><a ng-click="goDetail('hotel',hotel.newInvoice)">酒店发票</a></p>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="planDetail.backTraffic.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #CF2520;">&#xe90e;</div>
                            <div class="startplace">{{backTraffic.arrivalPlace}}</div>
                            <div class="description">{{backTraffic.endTime | date: 'yyyy-MM-dd'}}<span ng-if="backTraffic.latestArriveTime!=undefined && backTraffic.latestArriveTime!=''">&nbsp;&nbsp;&nbsp;最晚&nbsp;{{backTraffic.latestArriveTime | date: 'yyyy-MM-dd HH:mm'}}&nbsp;到达</span></div>
                            <div class="endplace">{{backTraffic.startPlace}}</div>
                        </td>
                        <td align="center">¥{{backTraffic.budget.toFixed(2)}}</td>
                        <td align="center">
                            <span ng-if="backTraffic.expenditure">¥{{backTraffic.expenditure.toFixed(2)}}</span>
                            <span ng-if="!backTraffic.expenditure">无</span>
                        </td>
                        <td align="center" class="po_r">
                            <input type="button" class="common_btn1 uploadbtn" value="上传" ng-if="backTraffic.invoice.length==0">
                            <input type="file" class="file" name="tmpFile" value='选择文件' id="i_backTraffic" ref="{{backTraffic.id}}" data-type = "3" ng-if="backTraffic.invoice.length==0">
                            <div ng-if="backTraffic.invoice.length!=0">
                                <p ng-if="backTraffic.status=='-1'">
                                    <input type="button" class="common_btn1 uploadbtn" value="重新上传">
                                    <input type="file" class="file" name="tmpFile" value='选择文件' id="i_hotel" ref="{{backTraffic.id}}" data-type = "2">
                                </p>
                                <p ng-if="backTraffic.status=='-1'">【审核未通过】</p>
                                <p ng-if="backTraffic.status==0" style="color: #CF2520;">【待审核】</p>
                                <p ng-if="backTraffic.status==1"><span class="tongguo web-icon-font2">&#xe9ec;</span></p>
                                <p ng-if="backTraffic.status!='-1'"><a ng-click="goDetail('backTraffic',backTraffic.newInvoice)">回程交通票据</a></p>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
<div class='messagebox_fixed' id="uploadimg">
    <div class='messagebox_box'>
        <div class='messagebox_title'>上传<div class='messagebox_close' onclick='messagebox_close()'><img src='/images/closezjx.png' style='display: block;'></div></div>
        <div class='messagebtns'><em>{{invoiceType}}</em><span>核对无误后点击确认按钮，上传后需等待审核</span><a class='message_cancel' onclick='messagebox_close()'>取消</a><a class='message_sure' ng-click='updateToServer()'>确认</a></div>
        <div class='messagebox_content'><img alt=""></div>
    </div>
</div>