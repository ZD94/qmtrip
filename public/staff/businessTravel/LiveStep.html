<script type="text/javascript">
    $(function(){
        function bindDatePicker(domId, options) {
            if (!options) {
                options = {};
            }

            var minDate = options.minDate;
            var maxDate = options.maxDate;

            var config = {
                prevText: "<",
                nextText: ">",
                monthNames: ["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],
                dayNamesMin: ["日","一","二","三","四","五","六"],
                minDate: 0,
                dateFormat: 'yy-mm-dd'
            }

            if (minDate) {
                if (!(minDate instanceof Date)) {
                    minDate = new Date(minDate);
                }
                config.minDate = minDate;
            }

            if (maxDate) {
                if (!(maxDate instanceof Date)) {
                    maxDate = new Date(maxDate);
                }
                config.maxDate = maxDate;
            }

            $("#"+domId).datepicker( "destroy").datepicker(config);
        }

        bindDatePicker("live_time");
        bindDatePicker("leave_time");

        $("#live_time").change(function() {
            var minDate = $(this).val();
            bindDatePicker("leave_time", {minDate: minDate});
        });

        $("#leave_time").change(function() {
            var maxDate = $(this).val();
            bindDatePicker("live_time", {maxDate: maxDate});
        })
    });
</script>
<div class="business-travel">
    <div class="business_bg"></div>
    <section class="live_step1">
        <form>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td colspan="3" height="60" style="position: relative;">
                    <input type="text" name="ep" class="common_text live1" style="width: 438px;" checkval="" placeholder="目的地城市" ng-model="endplacename" ng-change="endplace()">
                    <ul class="placelist1 placelist">
                        <li ng-repeat="item in endplaceitems" ng-click="chooseEndplace(item.name,item.id)">{{item.name}}</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td colspan="3" height="60" style="position: relative;">
                    <input type="text" name="lp" class="common_text live2" style="width: 438px;" checkval="" placeholder="住宿地标位置（计划入住在XXX位置）" ng-model="liveplacename" ng-change="liveplace()">
                    <ul class="placelist2 placelist">
                        <li ng-repeat="item in liveplaceitems" ng-click="chooseLiveplace(item.name,item.id)">{{item.name}}</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td width="210" height="60">
                    <input type="text" name="livet" class="common_text" id="live_time" ng-model="live_time" style="width: 188px;" placeholder="入住日期">
                </td>
                <td height="60" align="center" style="color: #D9D9D9;">---</td>
                <td width="210" height="60">
                    <input type="text" name="leavet" class="common_text" id="leave_time" ng-model="leave_time" style="width: 188px;" placeholder="离店日期">
                </td>
            </tr>
            <tr>
                <td colspan="3" height="60" align="center">
                    <input type="button" value="生成预算单" class="common_btn2 w308" ng-if="(live_time==undefined || live_time=='') || (leave_time==undefined || leave_time=='') || (endplacename==undefined || endplacename=='')" style="float: none; margin: 0 auto;">
                    <input type="button" value="生成预算单" class="common_btn1 w308" ng-if="(live_time!=undefined && live_time!='') && (leave_time!=undefined && leave_time!='') && (endplacename!=undefined && endplacename!='')" ng-click="budget()" style="float: none; margin: 0 auto;">
                </td>
            </tr>
            <tr>
                <td colspan="3" height="60" align="center">
                    <input type="button" value="返回上一步" class="common_btn2 w308" ng-click="prevstep()" style="float: none; margin: 0 auto;">
                </td>
            </tr>
        </table>
        </form>
    </section>
</div>