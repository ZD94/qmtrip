<style>html,body {background: #F5F5F5;}</style>
<div class="travel-record">
    <div class="travelDetail">
        <div class="travelpath" ng-if="planDetail.status!='-1'">待审核列表&nbsp;>&nbsp;<span>审核详情页</span></div>
        <div class="travelpath" ng-if="planDetail.status=='-1'">待出预算列表&nbsp;>&nbsp;<span>待出预算详情页</span></div>
        <div class="mainbox">
            <div class="title_top">
                <table width="100%">
                    <tr>
                        <td width="220" height="40" align="left">生成时间：{{planDetail.createAt | date: 'yyyy-MM-dd HH:mm'}}</td>
                        <td height="40" align="center">{{travelerName}}于
                            <span ng-if="planDetail.startAt">{{planDetail.startAt | date: 'yyyy月MM月dd日'}}</span>
                            <span ng-if="!planDetail.startAt">{{planDetail.hotel[0].startTime | date: 'yyyy月MM月dd日'}}</span>
                            的出差状况
                        </td>
                        <td width="220" height="40" align="right">{{planDetail.description}}</td>
                    </tr>
                </table>
            </div>
            <!--<div class="content_top">-->
                <!--<dl>-->
                    <!--<dt>动态标准预算</dt>-->
                    <!--<dd>-->
                        <!--<span ng-if="planDetail.status=='-1'">暂无</span>-->
                        <!--<span ng-if="planDetail.status!='-1'">¥{{planDetail.budget.toFixed(2)}}</span>-->
                    <!--</dd>-->
                <!--</dl>-->
                <!--<dl>-->
                    <!--<dt>实际支出</dt>-->
                    <!--<dd>-->
                        <!--<span ng-if="!planDetail.expenditure">暂无</span>-->
                        <!--<span ng-if="planDetail.expenditure">¥{{planDetail.expenditure.toFixed(2)}}</span>-->
                    <!--</dd>-->
                <!--</dl>-->
                <!--<dl>-->
                    <!--<dt>为公司节省</dt>-->
                    <!--<dd>-->
                        <!--<span ng-if="!planDetail.expenditure">暂无</span>-->
                        <!--<span ng-if="planDetail.expenditure">-->
                            <!--<span ng-if="planDetail.budget-planDetail.expenditure>0">¥{{(planDetail.budget-planDetail.expenditure).toFixed(2)}}</span>-->
                            <!--<span ng-if="planDetail.budget-planDetail.expenditure<=0">¥0.00</span>-->
                        <!--</span>-->
                    <!--</dd>-->
                <!--</dl>-->
                <!--<dl>-->
                    <!--<dt>获得积分</dt>-->
                    <!--<dd>-->
                        <!--<span ng-if="planDetail.score">{{planDetail.score}}</span>-->
                        <!--<span ng-if="!planDetail.score">暂无</span>-->
                    <!--</dd>-->
                <!--</dl>-->
            <!--</div>-->
            <!--<div class="title_bottom"><span></span>差旅消费明细</div>-->
            <div class="content_bottom">
                <table width="100%" border="1" bordercolor="#E5E5E5">
                    <tr>
                        <th height="40">明细</th>
                        <th width="135" height="40">预算</th>
                        <th width="135" height="40">实际支出</th>
                        <th width="135" height="40">出差票据</th>
                    </tr>
                    <tr ng-if="planDetail.outTraffic.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #CF2520;">&#xe90e;</div>
                            <div class="startplace">{{outTraffic.startPlace}}</div>
                            <div class="description">{{outTraffic.startTime | date: 'yyyy-MM-dd'}}<span ng-if="outTraffic.latestArriveTime!=undefined && outTraffic.latestArriveTime!=''">&nbsp;&nbsp;&nbsp;最晚&nbsp;{{outTraffic.latestArriveTime | date: 'yyyy-MM-dd HH:mm'}}&nbsp;到达</span></div>
                            <div class="endplace">{{outTraffic.arrivalPlace}}</div>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="outTraffic.budget!='-1'">¥{{outTraffic.budget.toFixed(2)}}</span>
                            <a ng-if="outTraffic.budget=='-1'" ng-click="editBudgetShow(outTraffic.id)" style="color: #118FD6;">录入预算</a>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="outTraffic.expenditure">¥{{outTraffic.expenditure.toFixed(2)}}</span>
                            <span ng-if="!outTraffic.expenditure">暂无</span>
                        </td>
                        <td width="135" align="center">
                            <p ng-if="outTraffic.budget=='-1'">暂无</p>
                            <div ng-if="outTraffic.budget!='-1'">
                                <p ng-if="!outTraffic.newInvoice && outTraffic.isCommit==false">暂无</p>
                                <div ng-if="outTraffic.isCommit==true">
                                    <p ng-if="outTraffic.status==0">【待审核】</p>
                                    <p ng-if="outTraffic.status==1">【审核通过】</p>
                                    <p>去程交通票据</p>
                                </div>
                                <div ng-if="outTraffic.status=='-1'">
                                    <p>【审核未通过】</p>
                                    <p>去程交通票据</p>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="planDetail.hotel.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #5248C8;">&#xe914;</div>
                            <div class="hoteldescription">
                                <p>入住地：{{hotel.city}}&nbsp;{{hotel.hotelName}}附近</p>
                                <p>入住日期：{{hotel.startTime | date: 'yyyy-MM-dd'}}&nbsp;&nbsp;&nbsp;&nbsp;退房日期：{{hotel.endTime | date: 'yyyy-MM-dd'}}</p>
                            </div>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="hotel.budget!='-1'">¥{{hotel.budget.toFixed(2)}}</span>
                            <a ng-if="hotel.budget=='-1'" ng-click="editBudgetShow(hotel.id)" style="color: #118FD6;">录入预算</a>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="hotel.expenditure">¥{{hotel.expenditure.toFixed(2)}}</span>
                            <span ng-if="!hotel.expenditure">暂无</span>
                        </td>
                        <td width="135" align="center">
                            <p ng-if="hotel.budget=='-1'">暂无</p>
                            <div ng-if="hotel.budget!='-1'">
                                <p ng-if="!hotel.newInvoice && hotel.isCommit==false">暂无</p>
                                <div ng-if="hotel.isCommit==true">
                                    <p ng-if="hotel.status==0">【待审核】</p>
                                    <p ng-if="hotel.status==1">【审核通过】</p>
                                    <p>酒店发票</p>
                                </div>
                                <div ng-if="hotel.status=='-1'">
                                    <p>【审核未通过】</p>
                                    <p>酒店发票</p>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="planDetail.backTraffic.length!=0">
                        <td>
                            <div class="icon web-icon-font3" style="color: #CF2520;">&#xe90e;</div>
                            <div class="startplace">{{backTraffic.startPlace}}</div>
                            <div class="description">{{backTraffic.endTime | date: 'yyyy-MM-dd'}}<span ng-if="backTraffic.latestArriveTime!=undefined && backTraffic.latestArriveTime!=''">&nbsp;&nbsp;&nbsp;最晚&nbsp;{{backTraffic.latestArriveTime | date: 'yyyy-MM-dd HH:mm'}}&nbsp;到达</span></div>
                            <div class="endplace">{{backTraffic.arrivalPlace}}</div>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="backTraffic.budget!='-1'">¥{{backTraffic.budget.toFixed(2)}}</span>
                            <a ng-if="backTraffic.budget=='-1'" ng-click="editBudgetShow(backTraffic.id)" style="color: #118FD6;">录入预算</a>
                        </td>
                        <td width="135" align="center">
                            <span ng-if="backTraffic.expenditure">¥{{backTraffic.expenditure.toFixed(2)}}</span>
                            <span ng-if="!backTraffic.expenditure">暂无</span>
                        </td>
                        <td width="135" align="center">
                            <p ng-if="backTraffic.budget=='-1'">暂无</p>
                            <div ng-if="backTraffic.budget!='-1'">
                                <p ng-if="!backTraffic.newInvoice && backTraffic.isCommit==false">暂无</p>
                                <div ng-if="backTraffic.isCommit==true">
                                    <p ng-if="backTraffic.status==0">【待审核】</p>
                                    <p ng-if="backTraffic.status==1">【审核通过】</p>
                                    <p>回程交通票据</p>
                                </div>
                                <div ng-if="backTraffic.status=='-1'">
                                    <p>【审核未通过】</p>
                                    <p>回程交通票据</p>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <a id="outTraffic"></a>
        <dl class="invoice" ng-if="outTraffic.newInvoice">
            <dt>去程交通发票
                <span ng-if="outTraffic.status=='-1'" style="color: #9B9B9B;">【审核未通过】</span>
                <span ng-if="outTraffic.status==0" style="color: #DE492A;">【待审核】</span>
                <span ng-if="outTraffic.status==1" style="color: #9B9B9B;">【审核通过】</span>
            </dt>
            <dd>
                <table width="100%">
                    <tr style="border-bottom: 1px #E5E5E5 solid">
                        <td>
                            <div ng-repeat="item in outTraffic.invoice">
                                <p>{{item.create_at}}　第{{item.times}}次上传</p>
                                <p ng-if="item.status!=0">{{item.approve_at}}　<span ng-if="item.status=='-1'">审核未通过　　理由：{{item.remark}}　　操作人：{{outTraffic.auditName.name}}</span><span ng-if="item.status==1">审核通过</span></p>
                            </div>
                        </td>
                        <td width="250" valign="bottom">
                            <div ng-if="outTraffic.status==0">
                                    <input type="button" class="common_btn1 w100" value="审核未通过" ng-click="invoiceNopassShow('outTraffic')" style="float: right;">
                                    <input type="button" class="common_btn1 w100" value="审核通过" ng-click="invoicePassShow('outTraffic')" style="margin-right: 20px; float: right;">
                                </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" colspan="2"><img ng-src="{{outTrafficInvoiceImg || ''}}" alt="去程交通票据"></td>
                    </tr>
                </table>
            </dd>
        </dl>
        <a id="hotel"></a>
        <dl class="invoice" ng-if="hotel.newInvoice">
            <dt>酒店发票
                <span ng-if="hotel.status=='-1'" style="color: #9B9B9B;">【审核未通过】</span>
                <span ng-if="hotel.status==0" style="color: #DE492A;">【待审核】</span>
                <span ng-if="hotel.status==1" style="color: #9B9B9B;">【审核通过】</span>
            </dt>
            <dd>
                <table width="100%">
                    <tr style="border-bottom: 1px #E5E5E5 solid">
                        <td>
                            <div ng-repeat="item in hotel.invoice">
                                <p>{{item.create_at}}　第{{item.times}}次上传</p>
                                <p ng-if="item.status!=0">{{item.approve_at}}　<span ng-if="item.status=='-1'">审核未通过　　理由：{{item.remark}}　　操作人：{{hotel.auditName.name}}</span><span ng-if="item.status==1">审核通过</span></p>
                            </div>
                        </td>
                        <td width="250" valign="bottom">
                            <div ng-if="hotel.status==0">
                                <input type="button" class="common_btn1 w100" value="审核未通过" ng-click="invoiceNopassShow('hotel')" style="float: right;">
                                <input type="button" class="common_btn1 w100" value="审核通过" ng-click="invoicePassShow('hotel')" style="margin-right: 20px; float: right;">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" colspan="2"><img ng-src="{{hotelInvoiceImg || ''}}" alt=""></td>
                    </tr>
                </table>
            </dd>
        </dl>
        <a id="backTraffic"></a>
        <dl class="invoice" ng-if="backTraffic.newInvoice">
            <dt>回程交通发票
                <span ng-if="backTraffic.status=='-1'" style="color: #9B9B9B;">【审核未通过】</span>
                <span ng-if="backTraffic.status==0" style="color: #DE492A;">【待审核】</span>
                <span ng-if="backTraffic.status==1" style="color: #9B9B9B;">【审核通过】</span>
            </dt>
            <dd>
                <table width="100%">
                    <tr style="border-bottom: 1px #E5E5E5 solid">
                        <td>
                            <div ng-repeat="item in backTraffic.invoice">
                                <p>{{item.create_at}}　第{{item.times}}次上传</p>
                                <p ng-if="item.status!=0">{{item.approve_at}}　<span ng-if="item.status=='-1'">审核未通过　　理由：{{item.remark}}　　操作人：{{backTraffic.auditName.name}}</span><span ng-if="item.status==1">审核通过</span></p>
                            </div>
                        </td>
                        <td width="250" valign="bottom">
                            <div ng-if="backTraffic.status==0">
                                <input type="button" class="common_btn1 w100" value="审核未通过" ng-click="invoiceNopassShow('backTraffic')" style="float: right;">
                                <input type="button" class="common_btn1 w100" value="审核通过" ng-click="invoicePassShow('backTraffic')" style="margin-right: 20px; float: right;">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" colspan="2"><img ng-src="{{backTrafficInvoiceImg || ''}}" alt=""></td>
                    </tr>
                </table>
            </dd>
        </dl>
    </div>
</div>




<section class="editBudget">
    <div class="editBudgetbox">
        <div class="editBudgetbox_t">
            <span style="float: left;">录入预算</span>
            <span ng-click="invoiceColse()" style="float: right;"><img src="agency/images/close.jpg"></span>
        </div>
        <div class="editBudgetbox_p">
            <div class="error" style="height: 25px; line-height: 25px; color: #DE492A;"></div>
            <div style="height: 30px; line-height: 30px;">录入预算金额：</div>
            <div><input type="text" class="budget common_text" style="width: 336px;"></div>
            <div style="margin-top: 20px;">
                <input type="button" value="确认" ng-click="editBudget()" class="common_btn1" style="width: 60px; margin-left: 100px;">
                <input type="button" value="取消" ng-click="invoiceColse()" class="common_btn2" style="width: 60px; margin-left: 20px;">
            </div>
        </div>
    </div>
</section>

<section class="invoicePass">
    <div class="invoicebox">
        <div class="invoicebox_t">
            <span style="float: left;">审核通过</span>
            <span ng-click="invoiceColse()" style="float: right;"><img src="agency/images/close.jpg"></span>
        </div>
        <div class="invoicebox_p">
            <div class="error" style="height: 25px; line-height: 25px; color: #DE492A;"></div>
            <div style="height: 30px; line-height: 30px;">录入票据实际支出：</div>
            <div><input type="text" class="expenditure common_text" style="width: 336px;"></div>
            <div style="margin-top: 20px;">
                <input type="button" value="确认" ng-click="invoicePass()" class="common_btn1" style="width: 60px; margin-left: 100px;">
                <input type="button" value="取消" ng-click="invoiceColse()" class="common_btn2" style="width: 60px; margin-left: 20px;">
            </div>

            <div class="success">
                <div class="success_icon">
                    <span class="web-icon-font2">&#xe9ec;</span>
                </div>
                <div class="success_text"></div>
            </div>
        </div>
    </div>
</section>



<section class="invoiceNoPass">
    <div class="invoicebox">
        <div class="invoicebox_t">
            <span style="float: left;">审核未通过理由</span>
            <span ng-click="invoiceColse()" style="float: right;"><img src="agency/images/close.jpg"></span>
        </div>
        <div class="invoicebox_p" style="height: 235px;">
            <div class="error" style="height: 20px; line-height: 20px; color: #DE492A;"></div>
            <div style="height: 25px; line-height: 25px;">请选择理由：</div>
            <div class="reason1">
                <i class="web-icon-font2" ng-click="checkreason1()">&#xe9ec;</i>
                <span class="reason1_text">图片模糊</span>
            </div>
            <div class="reason2">
                <i class="web-icon-font2" ng-click="checkreason2()">&#xe9ec;</i>
                <span class="reason2_text">所传单据和出差记录不符</span>
            </div>
            <div style="height: 25px; line-height: 25px;">其他理由：</div>
            <div><input type="text" class="remark common_text" style="width: 336px;"></div>
            <div style="margin-top: 20px;">
                <input type="button" value="确认" ng-click="invoiceNoPass()" class="common_btn1" style="width: 60px; margin-left: 100px;">
                <input type="button" value="取消" ng-click="invoiceColse()" class="common_btn2" style="width: 60px; margin-left: 20px;">
            </div>
        </div>
    </div>
</section>