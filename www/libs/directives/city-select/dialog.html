<ion-modal-view class="city_dialog">
    <ion-header-bar class="bar-stable">
        <h1 class="title">{{options.title}}</h1>
        <div class="button button-clear" ng-click="modal.hide()">取消</div>
    </ion-header-bar>
    <ion-content padding="false" scroll="false" class="has-header flex-c001" ng-class="{'search-header': searchBegin}">
        <div class="city_search">
            <div class="bar item-input-inset">
                <label class="item-input-wrapper">
                    <i class="icon ion-ios-search placeholder-icon"></i>
                    <input type="search" placeholder="请输入关键词或首字母" ng-focus="showSearchList()" ng-change="queryCity(keyword)" ng-model="keyword">
                </label>
                <button class="button button-clear" ng-if="searchBegin" ng-click="hideSearchList()">
                    取消
                </button>
            </div>
        </div>
        <div class="mask_list" ng-if="searchBegin">
            <ion-scroll>
                <div class="search_list list">
                    <div class="item" ng-repeat="city in keyList" ng-click="confirm(city)">{{city.name}}</div>
                    <div class="item no-result" ng-if="!keyList || keyList.length<1">搜索无结果</div>
                </div>
            </ion-scroll>
        </div>
        <div class="city_tabs">
            <a class="city_tab" ng-class="{active:!isAbroad}" ng-click="checkAbroad(false)">国内</a>
            <a class="city_tab" ng-class="{active:isAbroad}" ng-click="checkAbroad(true)">国外</a>
        </div>
        <ion-scroll>
            <div class="city_content">
                <div class="content_header">
                    <h3>当前/历史</h3>
                    <div class="hot_list">
                        <span ng-repeat="city in history_city track by $index" ng-class="{active:val.name == city.name}" ng-click="confirm(city)">{{city.name}}</span>
                    </div>
                    <h3>热门城市</h3>
                    <div class="hot_list">
                        <span ng-repeat="city in hotCities" ng-click="confirm(city)">{{city.name}}</span>
                    </div>
                </div>
                <div class="city_list" ng-if="!isAbroad">
                    <div class="city_block list" ng-repeat="item in internallist" ng-style="item.top">
                        <div class="city_title">{{item.first_letter}}</div>
                        <div class="item" ng-repeat="city in item.cities" ng-click="confirm(city)">{{city.name}}</div>
                    </div>
                </div>
                <div class="city_list" ng-if="isAbroad">
                    <div class="city_block list" ng-repeat="item in abroadlist" ng-style="item.top">
                        <div class="city_title">{{item.first_letter}}</div>
                        <div class="item" ng-repeat="city in item.cities" ng-click="confirm(city)">{{city.name}}</div>
                    </div>
                </div>
            </div>
            <ion-infinite-scroll ng-if="!isAbroad && pages.hasNextIndex()" on-infinite="pages.getCityList(internalCities)"></ion-infinite-scroll>
            <ion-infinite-scroll ng-if="isAbroad && pages.hasNextIndex()" on-infinite="pages.getCityList(abroadCities)"></ion-infinite-scroll>
        </ion-scroll>
    </ion-content>
</ion-modal-view>