<ion-view title="出差统计-本月预算" id="page24">
    <ion-content padding="false" class="has-header" scroll="false">
        <div class="flex-c01">
            <spanchange class="item item-input date_selected" ng-model="data.monthSelection">

            </spanchange>
            <ion-scroll style="padding: 10px;">
                <div class="button-bar budgetMenu">
                    <a href="#/statistics/" id="page24-button73" class="button button-positive button-outline">汇总</a>
                    <a ng-class="{true: '', false: 'button-outline'}[isSActive]" class="button button-positive"
                       ng-click="searchStatistics('S')">按员工</a>
                    <a ng-class="{true: '', false: 'button-outline'}[isPActive]" class="button button-positive"
                       ng-click="searchStatistics('P')">按项目</a>
                    <a ng-class="{true: '', false: 'button-outline'}[isDActive]" class="button button-positive"
                       ng-click="searchStatistics('D')">按部门</a>
                </div>

                <form class="list">
                    <label class="item item-input">
                        <i class="icon ion-search placeholder-icon"></i>
                        <input ng-change="searchStatistics(data.monthSelection.type)" type="search"
                               placeholder="{{placeholder}}" ng-model="data.monthSelection.keyWord">
                    </label>
                </form>

                <ion-list>
                    <ion-item class="item stat-label-content" ng-repeat="en in statisticData"
                              ng-click="goToStaffRecords(en.keyInfo.name)">
                        <div class="bar-header">
                            <staff-avatar ng-if="isSActive" class="avatar" staff="en.keyInfo"></staff-avatar>
                            <i ng-if="isPActive" class="icon ion-ios-flag"></i>
                            <i ng-if="isDActive" class="icon ion-ios-home"></i>
                            <span style="float:left;">{{en.keyInfo.name}}</span>
                            <span style="float: right;">
                                查看详情
                                <i class="icon ion-chevron-right"></i>
                            </span>
                        </div>
                        <div class="left-div">
                            <div>
                                <div class="label-top-left">
                                    <p>已完成出差({{showManTimes}})</p>
                                    <h2 class="ng-binding" style="text-align: center;">{{en.completeTripNum || 0}}</h2>
                                </div>
                                <div class="label-top-right">
                                    <p>已支出(元)</p>
                                    <h2 class="ng-binding" style="text-align: center;">{{en.expenditure || 0}}</h2>
                                </div>
                            </div>

                            <div>
                                <div class="label-bottom-left">
                                    <p>还将进行出差({{showManTimes}})</p>
                                    <h2 class="ng-binding" style="text-align: center;">{{(en.planTripNum ||
                                        0)-(en.completeTripNum || 0)}}</h2>
                                </div>
                                <div class="label-right">
                                    <p>计划支出(元)</p>
                                    <h2 class="ng-binding" style="text-align: center;">{{en.planBudget || 0}}</h2>
                                </div>
                            </div>
                        </div>
                        <div class="right-div">
                            <p>实际节省(元)</p>
                            <h2 class="ng-binding" style="text-align: center;">{{en.isSpecialApprove? 0 : (en.savedMoney
                                || 0)}}</h2>
                        </div>
                    </ion-item>
                </ion-list>
            </ion-scroll>
        </div>
    </ion-content>
</ion-view>