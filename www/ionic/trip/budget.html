<ion-view title="预算结果" id="page16">
    <ion-content padding="false" scroll="false" class="has-header">
        <div class="flex-c10">
            <ion-scroll>
                <div id="page16-markdown4" style="color:#000000;text-align:right;">
                    <p style="color: #fff;">{{trip.createAt| date: 'yyyy-MM-dd HH:mm:ss'}}</p>
                </div>
                <form class="list">
                    <div class="item item-input">
                        <span class="input-label">选择审批人</span>
                        <ng-selector-list
                                ng-model="trip.auditUser"
                                dlg-options="staffSelector"
                                dlg-title="选择审批人"
                                dlg-placeholder="请选择审批人"
                                class="fake-input"
                        ></ng-selector-list>
                    </div>
                </form>

                <ion-list class="jl_projectinfo">
                    <ion-item class="project_tit">{{trip.reason || trip.reasonName}}</ion-item>
                    <ion-item class="project_cont">
                        <p ng-if="trip && trip.beginDate">{{trip.beginDate| date: 'yyyy-MM-dd'}} 至 {{trip.endDate | date: 'yyyy-MM-dd'}}</p>
                        <p style="text-align: center">总预算:<span style="font-size: 20px;font-weight: bold;">{{totalPrice == -1 ? '暂无预算' : (totalPrice| currency: '')}}</span>{{totalPrice == -1 ? '' : '元'}}</p>
                    </ion-item>
                </ion-list>

                <div class="spacer budgetWrong">
                    <a ng-click="reportBudgetError()" >预算不合理?我要报错</a>
                </div>
                <ion-list>
                    <div ng-repeat="budget in budgets">
                        <ion-item class="item-divider">
                            <span ng-if='budget.tripType == ETripType.OUT_TRIP'>去程交通</span>
                            <span ng-if='budget.tripType == ETripType.BACK_TRIP'>回程交通</span>
                            <span ng-if='budget.tripType == ETripType.HOTEL'>住宿</span>
                            <span ng-if='budget.tripType == ETripType.SUBSIDY'>补助</span>
                            <span style="float: right">{{budget.price == -1 ? '暂无预算' : (budget.price| currency: '')}}{{budget.price == -1 ? '' : '元'}}</span>
                        </ion-item>

                        <ion-item ng-if="budget.tripType == ETripType.BACK_TRIP">
                            <span>{{trip.endDate | date: 'MM-dd'}}</span>
                            {{trip.destinationPlaceName}}
                            &nbsp;
                            <i ng-if='budget.type == EInvoiceType.PLANE' class="icon ion-plane"></i>
                            <i ng-if='budget.type == EInvoiceType.TRAIN' class="icon ion-android-train"></i>
                            <i ng-if='budget.type == EInvoiceType.HOTEL' class="icon ion-home"></i>
                            &nbsp;
                            {{trip.originPlaceName}}
                            <br/> {{budget.type == EInvoiceType.TRAIN ? budget.cabinClass : (MTxPlaneLevel[budget.cabinClass ]? MTxPlaneLevel[budget.cabinClass] : "")}}
                            <br/>{{budget.price == -1 ? '暂无预算' : (budget.price| currency: '')+'元'}}
                            <br/><span ng-if="budget.discount && budget.cabinClass == 'Economy'">折扣：{{budget.discount}}</span>
                        </ion-item>

                        <ion-item ng-if="budget.tripType == ETripType.HOTEL">
                            <span>{{trip.beginDate | date: 'MM-dd'}}至{{trip.endDate | date: 'MM-dd'}} 共{{budget.duringDays}}天</span>
                            <br/>
                            {{trip.destinationPlaceName}}<span ng-if="trip.hotelName">&nbsp;{{trip.hotelName}}附近</span>
                            <br>{{budget.price == -1 ? '暂无预算' : (budget.price /budget.duringDays | currency: '')+'元/天'}}
                        </ion-item>

                        <ion-item ng-if="budget.tripType == ETripType.SUBSIDY">
                            <span>{{trip.beginDate | date: 'MM-dd'}}至{{trip.endDate | date: 'MM-dd'}} 共{{budget.duringDays}}天</span>
                            <br/>
                            {{budget.price == -1 ? '暂无预算' : (budget.price/ budget.duringDays| currency: '')+'元/天'}}
                        </ion-item>

                        <ion-item ng-if="budget.tripType == ETripType.OUT_TRIP">
                            <span>{{trip.beginDate | date: 'MM-dd'}}</span>
                            {{trip.originPlaceName}}
                            &nbsp;
                            <i ng-if='budget.type == EInvoiceType.PLANE' class="icon ion-plane"></i>
                            <i ng-if='budget.type == EInvoiceType.TRAIN' class="icon ion-android-train"></i>
                            &nbsp;
                            {{trip.destinationPlaceName}}
                            <br/> {{budget.type == EInvoiceType.TRAIN ? budget.cabinClass : (MTxPlaneLevel[budget.cabinClass ]? MTxPlaneLevel[budget.cabinClass] : "")}}
                            <!--{{MTxPlaneLevel[budget.cabinClass]?MTxPlaneLevel[budget.cabinClass]:""}}-->
                            <br/>{{budget.price == -1 ? '暂无预算' : (budget.price| currency: '')+'元'}}
                            <br/><span ng-if="budget.discount  && budget.cabinClass == 'Economy'">折扣：{{budget.discount}}</span>
                        </ion-item>
                    </div>
                </ion-list>
            </ion-scroll>

            <div class="button-bar">
                <a ng-if="totalPrice>0" ng-click="saveTripPlan()" id="page16-button56" class="button button-positive">预算提交审批</a>
                <a ng-if="totalPrice <= 0" id="page16-button57" class="button button-">暂无预算无法提交审批</a>
            </div>
        </div>
    </ion-content>
</ion-view>