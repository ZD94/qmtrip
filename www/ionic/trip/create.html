<ion-view title="我要出差" id="page1" style="background-color:#E8E7E9;">
    <ion-content padding="true" class="has-header">
        <form class="list">
            <div class="item item-input">
                <span class="input-label">出差事由</span>
                <ng-selector-list
                        ng-model="trip.reasonName"
                        dlg-options="projectSelector"
                        dlg-title="请选择出差事由"
                        dlg-placeholder="请选择或输入事由"
                        class="fake-input"
                ></ng-selector-list>
            </div>
            <div class="item item-input">
                <span class="input-label">出发地</span>
                <ng-selector-city
                        ng-model="trip.fromPlace"
                        dlg-options="fromPlaceSelector"
                        dlg-title="出发地选择"
                        dlg-placeholder="请输入城市名或首字母缩写"
                        class="fake-input"
                ></ng-selector-city>
            </div>
            <div class="item item-input">
                <span class="input-label">目的地</span>
                <ng-selector-city
                        ng-model="trip.place"
                        dlg-options="placeSelector"
                        dlg-title="请选择出差地点"
                        dlg-placeholder="请输入城市名或首字母缩写"
                        class="fake-input"
                ></ng-selector-city>
            </div>
            <div class="item item-input">
                <span class="input-label label-doubleline">最晚何时到达<br/><span>(目的地当地时间)</span></span>
                <fake-input value="{{trip.beginDate|date:'yyyy-MM-dd HH:mm'}}" placeholder="请选择出差日期" ng-click="selectDatespan()">
                </fake-input>
            </div>
            <div class="item item-input">
                <span class="input-label label-doubleline">最早何时离开<br/><span>(目的地当地时间)</span></span>
                <ng-selector-date
                        ng-model="trip.endDate"
                        dlg-options="endDateSelector"
                        dlg-title="请选择结束日期"
                        class="fake-input"
                ></ng-selector-date>
            </div>
            <div class="spacer" style="width: 300px; height: 9px;"></div>
            <ion-toggle toggle-class="toggle-positive" ng-model="trip.traffic">交通</ion-toggle>
            <div ng-if="trip.traffic">
                <ion-toggle toggle-class="toggle-positive" ng-model="trip.round">返程</ion-toggle>
            </div>
            <div class="spacer" style="width: 300px; height: 9px;"></div>
            <ion-toggle toggle-class="toggle-positive" ng-disabled="!trip.place" ng-model="trip.hotel">住宿<span
                    ng-if="trip.hotel">（共{{calcTripDuration()}}天）</span></ion-toggle>
            <div ng-if="trip.hotel && !trip.place.isAbroad">
                <!--<div class="button-bar">
                    &lt;!&ndash;<button id="page6-button34" class="button button-light button-small button-block" ng-click="decTripDuration()">-</button>&ndash;&gt;
                    <button id="page6-button35" class="button button-stable button-block">共{{calcTripDuration()}}天</button>
                    &lt;!&ndash;<button id="page6-button36" class="button button-light button-small button-block" ng-click="incTripDuration()">+</button>&ndash;&gt;
                </div>-->
                <div class="item item-input" style="margin-top: 10px;">
                    <span class="input-label">地标</span>
                    <ng-selector-map
                            ng-model="trip.hotelPlaceObj"
                            dlg-options="hotelPlaceSelector"
                            dlg-place="trip.place.name"
                            dlg-latitude = "trip.place.latitude"
                            dlg-longitude="trip.place.longitude"
                            dlg-title="请选择地标"
                            dlg-placeholder='请输入地标名称'
                            class="fake-input"
                    ></ng-selector-map>
                </div>
            </div>
            <div class="spacer" style="width: 300px; height: 9px;"></div>
            <div class="item item-input item-icon-right" ng-click="selectSubsidyTemplate()" ng-if="currentTpSts && currentTpSts.length">
                <span class="input-label">出差补助</span>
                <i class="icon ion-chevron-right"></i>
                <span class="item-note">{{select_subsidy.name}}<i ng-if="subsidy.template">({{select_subsidy.subsidyMoney}}元/天)</i></span>
            </div>

            <div>
                <a id="page1-button26" class="button button-positive  button-block" ng-click="nextStep()">下一步</a>
                <a id="" class="button button-stable  button-block" ng-click="specialApprove()" ng-if="showSpecialApprove">特别审批</a>
            </div>
        </form>
    </ion-content>
</ion-view>