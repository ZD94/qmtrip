<ion-view title="行程详情页" id="page20">
    <ion-content padding="false" scroll="false" class="has-header">
        <div class="flex-c10">
            <ion-scroll>
                <ion-list ng-if="!isSelf">
                    <tp-staff-detail staff="staff"></tp-staff-detail>
                    <div class="spacer" style="width: 285px; height: 17px;"></div>
                </ion-list>

                <tp-header trip="tripDetail"></tp-header>
                <div class="spacer" style="width: 285px; height: 17px;"></div>
                <div class="button-bar"></div>
                <ion-list>
                    <!--交通条目-->
                    <tp-detail-item ng-repeat="budget in trafficBudgets track by $index"
                                    show-uploader="false"
                                    title="{{$index == 0? '交通': ''}}"
                                    budget="{{trafficTotalBudget | currency: ''}}元"
                                    item="budget">
                    </tp-detail-item>

                    <!--住宿条目-->
                    <tp-detail-item ng-repeat="budget in hotelBudgets"
                                    show-uploader="false"
                                    title="{{$index == 0? '住宿': ''}}"
                                    budget="{{hotelTotalBudget | currency: ''}}元"
                                    item="budget">
                    </tp-detail-item>

                    <!--补助-->
                    <tp-detail-item ng-repeat="budget in subsidyBudgets"
                                    show-uploader="false"
                                    title="{{$index == 0? '补助': ''}}"
                                    budget="{{subsidyTotalBudget | currency: ''}}元"
                                    item="budget">
                    </tp-detail-item>
                    <!--特别审批-->
                    <tp-detail-item ng-repeat="budget in specialApproveBudgets"
                                    show-uploader="false"
                                    title="{{$index == 0? '特别审批': ''}}"
                                    budget="{{specialApproveTotalBudget | currency: ''}}元"
                                    remark="{{tripDetail.specialApproveRemark}}"
                                    item="budget">
                    </tp-detail-item>
                </ion-list>
            </ion-scroll>

            <div ng-if="tripDetail && tripDetail.status != undefined" class="button-bar">
                <a ng-if="tripDetail.status == EPlanStatus.WAIT_COMMIT" ng-click="showAlterDialog()" id="page20-button60" class="button button-positive" no-back>提交审核</a>
                <a ng-if="tripDetail.status == EPlanStatus.WAIT_UPLOAD" class="button button-stable" no-back>提交审核</a>
                <a ng-if="tripDetail.status == EPlanStatus.APPROVE_NOT_PASS" ng-click="cancelTripPlan()" id="page20-button61" class="button button-cancel" no-back>撤销</a>
                <a ng-if="tripDetail.status == EPlanStatus.APPROVE_NOT_PASS" ng-click="createTripPlan()" id="page20-button62" class="button button-positive" no-back>再次生成</a>
                <a ng-if="tripDetail.status == EPlanStatus.WAIT_APPROVE" ng-click="cancelTripPlan()" id="page20-button63" class="button button-cancel" no-back>撤销</a>
                <a ng-if="tripDetail.status == EPlanStatus.COMPLETE && !hasMakeSpendRecorder" class="button button-positive" no-back ng-click="makeSpendReport()">生成报销单</a>
            </div>
        </div>
    </ion-content>
</ion-view>