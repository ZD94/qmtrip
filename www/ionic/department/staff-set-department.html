<ion-modal-view class="staff-set-dpt">
    <ion-header-bar class="bar-stable">
        <h1 class="title">选择部门</h1>
        <a class="button button-clear" ng-click="confirm(oldDepartments)">取消</a>
    </ion-header-bar>
    <ion-content scroll="false">
        <div class="flex-c10">
            <ion-scroll>
                <div class="item root-item" ng-class="{added: addedDepartments.indexOf(rootDepartment) >= 0}" ng-click="addToDepartments(rootDepartment)">
                    <i class="icon ion-checkmark-circled" ng-if="selected(rootDepartment)"></i>
                    <i class="icon ion-ios-circle-outline" ng-if="!selected(rootDepartment)"></i>
                    {{rootDepartment.name}}
                    <span class="item-note" ng-if="rootDepartment.parent"
                          ng-click="$event.stopPropagation();$event.preventDefault();backParent(rootDepartment.parent)">
                        返回上级
                    </span>
                </div>
                <div class="childs" ng-if="childDepartments && childDepartments.length > 0">
                    <div class="item"
                         ng-repeat="department in childDepartments"
                         ng-click="addToDepartments(department)"
                         ng-class="{added: selected(department)}">
                        <i class="icon ion-checkmark-circled" ng-if="selected(department)"></i>
                        <i class="icon ion-ios-circle-outline" ng-if="!selected(department)"></i>
                        {{department.name}}
                        <span class="item-note" ng-if="department.hasChild"
                              ng-click="$event.stopPropagation();$event.preventDefault();showChild(department)">
                        下级
                        <i class="icon ion-chevron-right"></i>
                        </span>
                    </div>
                </div>
            </ion-scroll>
            <div class="array_menu">
                <div class="added-array">
                    <ion-scroll direction="x" >
                        <span ng-click="addToDepartments(department)" ng-repeat="department in addedDepartments track by $index">{{department.name}} <i class="icon ion-ios-close-empty"></i></span>
                    </ion-scroll>
                    <!--<scroll-x array-models="addedDepartments"></scroll-x>-->
                </div>
                <div class="confirm" ng-click="confirm(addedDepartments)">确定</div>
            </div>
        </div>
    </ion-content>
</ion-modal-view>