<div class="bar bar-subheader">
    <div class="flex-subheader">
        <label class="item item-input">
            <i class="icon ion-search placeholder-icon"></i>
            <input type="text" placeholder="Search" ng-model="keywords" ng-change="searchKeyword(keywords)">
        </label>
        <span class="fa sort_btn" ng-class="[selected.icon]" sort-select select-list="arrlist" select="selected" done="sortBy">
            <span ng-if="selected.value == ''">时间</span>
            <span ng-if="selected.value == 'nameDesc'">姓名</span>
            <span ng-if="selected.value == 'nameAsc'">姓名</span>
            <span ng-if="selected.value == 'role'">角色</span>
            <span ng-if="selected.value == 'travelPolicy'">标准</span>
            <span ng-if="selected.value == 'status'">激活</span>
        </span>
        <span class="ion-android-person-add" ng-click="addNewStaff()">添加</span>
    </div>
</div>
<ion-content padding="true" class="has-header has-subheader">
    <div class="list">
        <div class="item department-list item-icon-right" ng-repeat="item in departments" ng-click="goChildDept(item.id)">
            <div class="department-icon"><i class="icon ion-ios-folder"></i></div>
            {{item.name}}({{item.staffNum || 0}}人)
            <i class="icon ion-chevron-right"></i>
        </div>
    </div>
    <div class="list" >
        <div class="item staff-list" ng-repeat="item in policy_staffs" ng-click="showStaff(item.staff.id)">
            <!--<div class="staff-avatar-text">{{item.name}}</div>-->
            <staff-avatar staff="item.staff" class="staff-avatar"></staff-avatar>
            <div class="staff-info">
                <p>{{item.staff.name}}
                    <span class="staff-role" ng-class="{'bg-blue':item.staff.roleId == EStaffRole.ADMIN}"
                          ng-if="item.staff.roleId == EStaffRole.ADMIN || item.staff.roleId == EStaffRole.OWNER"
                    >{{EStaffRoleNames[item.staff.roleId] }}</span>
                </p>
                <p>{{item.travelPolicy}}</p>
            </div>


            <span class="staff-flag bg-gray" ng-if="item.staff.newRegister">未激活</span>
            <span class="staff-flag" ng-if="item.staff.newStaff">新加入</span>
        </div>
    </div>
    <ion-infinite-scroll ng-if="page.hasNextPage()" on-infinite="page.nextPage()"></ion-infinite-scroll>
</ion-content>
<div class="tabs">
    <a class="tab-item" ng-click="addDepartment()">
        添加子部门
    </a>
    <a class="tab-item" ng-click="setDepartment()">
        部门管理
    </a>
    <a class="tab-item" ng-click="multipleMove()">
        批量移动
    </a>
</div>