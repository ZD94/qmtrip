<!DOCTYPE html>
<html lang="en" ng-app="debugModule" ng-controller="debug">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />
    <title>预算调试</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script src="//cdn.bootcss.com/angular.js/1.5.8/angular.js"></script>

    <style>
        .show {
            display: block;
        }
        .hidden {
            display: none;
        }
        td{
            min-width:250px;
        }
        th{
            width:227px;
        }
        a{
            cursor: pointer;
        }
    </style>
</head>
<body>

<h2>预算调试页面</h2>
<table class="table table-hover table-bordered">
    <tbody>
        <tr>
            <th>选择原始数据</th>
            <td>
                <select ng-model="originData" ng-options="x.title for x in originDatas">
                </select>
            </td>
        </tr>
        <tr>
            <th>原始数据:</th>
            <td placeholder="原始数据">
                <table ng-if="showOriginData">
                    <tr  ng-repeat="x in originData.originData">
                        <!--酒店的数据-->
                        <td ng-show="x.type !==0 && x.type!=1">{{x.name}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.star}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.agents[0].name}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.agents[0].price}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.latitude}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.longitude}}</td>
                        <!--航班的数据-->
                        <td ng-show="x.type == 1">{{x.No}}</td>
                        <td ng-show="x.type == 1">{{x.carry}}</td>
                        <td ng-show="x.type == 1">{{x.agents[0].name}}</td>
                        <td ng-show="x.type == 1">{{x.agents[0].cabins[0].name}}</td>
                        <td ng-show="x.type == 1">{{x.agents[0].cabins[0].price}}</td>
                        <td ng-show="x.type == 1">{{x.destination}}</td>
                        <td ng-show="x.type == 1">{{x.originPlace}}</td>
                        <td ng-show="x.type == 1">{{x.departDateTime}}</td>
                        <td ng-show="x.type == 1">{{x.arrivalDateTime}}</td>
                        <!--火车的数据-->
                        <td ng-show="x.type === 0">{{x.No}}</td>
                        <td ng-show="x.type === 0">{{x.agents[0].name}}</td>
                        <td ng-show="x.type === 0" ng-repeat="cabin in x.agents[0].cabins">
                            <span>类型：{{cabin.name}}</span>
                            <span>价格：{{cabin.price}}</span>
                            <span>剩余量：{{cabin.remainNum}}</span>
                        </td>
                        <td ng-show="x.type === 0">{{x.duration}}</td>
                        <td ng-show="x.type === 0">{{x.destination.id}}</td>
                        <td ng-show="x.type === 0">{{x.destination.name}}</td>
                        <td ng-show="x.type === 0">{{x.originPlace.id}}</td>
                        <td ng-show="x.type === 0">{{x.originPlace.name}}</td>
                    </tr>
                </table>
                <!--<textarea placeholder="原始数据" rows="8" cols="80" ng-if="showOriginData">{{originData.originData}}</textarea>-->
                <a ng-hide="showOriginData" ng-click="showOriginData = !showOriginData">显示</a>
                <a ng-show="showOriginData" ng-click="showOriginData = !showOriginData">隐藏</a>
            </td>
        </tr>
        <tr>
            <th>打完分数据:</th>
            <td>
                <table ng-if="showScoreData">
                    <tr  ng-repeat="x in originData.markedData">
                        <!--酒店的数据-->
                        <td ng-show="x.type !==0 && x.type!=1">{{x.name}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.star}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.price}}</td>
                        <td ng-show="x.type !==0 && x.type!=1">{{x.score}}</td>
                        <td ng-show="x.type !==0 && x.type!=1" ng-repeat="reason in x.reasons">
                            {{reason}}
                        </td>
                    </tr>
                </table>
                <!--<textarea placeholder="打分后数据" rows="8" cols="80" >{{originData.markedData}}</textarea>-->
                <a ng-hide="showScoreData" ng-click="showScoreData = !showScoreData">显示</a>
                <a ng-show="showScoreData" ng-click="showScoreData = !showScoreData">隐藏</a>
            </td>
        </tr>
        <tr>
            <th>使用策略</th>
            <td>
                <select ng-model="policy">
                    <option value="default">默认策略</option>
                    <option value="bmw">最高价策略</option>
                </select>
            </td>
        </tr>
        <tr>
            <th>打分详情</th>
            <td>
                <div placeholder="打分详情" rows="8" cols="80" ng-if="hideScoreDetail">
                    <table>
                        <tr ng-repeat="prefer in originData.prefers">
                            <td>{{prefer.name}}</td>
                            <td>
                                <input type="text" ng-model="prefer.options.score" value="分数：{{prefer.options.score}}">
                            </td>
                            <td>
                                <input type="text" ng-model="prefer.options.percent" value="系数：{{prefer.options.percent}}">
                            </td>
                        </tr>
                    </table>
                </div>
                <a ng-show="hideScoreDetail" ng-click="hideScoreDetail = !hideScoreDetail">隐藏</a>
                <a ng-hide="hideScoreDetail" ng-click="hideScoreDetail = !hideScoreDetail">显示</a>
                <br/>
                <select ng-model="prefer" ng-change="console.log('asdasds');">
                    <option ng-repeat="x in prefers" value="{{x.value}}">{{x.title}}</option>
                </select>
            </td>
        </tr>

        <tr>
            <th>预算结果</th>
            <td>
                <div placeholder="预算结果" rows="4" cols="80" ng-if="hideCalResult">
                    <div>{{result.name}}</div>
                    <div>{{result.price}}</div>
                    <div>{{result.star}}</div>
                    <div>{{result.agent}}</div>
                </div>
                <a ng-show="hideCalResult" ng-click="hideCalResult = !hideCalResult">隐藏</a>
                <a ng-hide="hideCalResult" ng-click="hideCalResult = !hideCalResult">显示</a>
            </td>
        </tr>

        <tr>
            <td colspan="2" align="center">
                <input type="button" class="btn btn-primary" value="获取预算" id="calBudgetBtn" ng-click="getBudget()"/>
            </td>
        </tr>
    </tbody>
</table>
<script src="./index.js"></script>
</body>
</html>