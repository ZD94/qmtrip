<!DOCTYPE html>
<html lang="en" ng-app="debugModule" ng-controller="debug">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />
    <title>预算调试</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script src="//cdn.bootcss.com/angular.js/1.5.8/angular.js"></script>

    <style>
        .show {
            display: block;
        }
        .hidden {
            display: none;
        }
        th{
            width:227px;
        }
        a{
            cursor: pointer;
        }
    </style>
</head>
<body>

<h2>预算调试页面</h2>
<table class="table table-bordered">
    <tbody>
        <tr>
            <th>选择原始数据</th>
            <td>
                <select ng-model="originData" ng-options="x.title for x in originDatas" ng-change="changeOrigin()">
                </select>
            </td>
        </tr>
        <tr>
            <th>原始数据:</th>
            <td>
                <a ng-hide="showScoreData" ng-click="showScoreData = !showScoreData">显示</a>
                <a ng-show="showScoreData" ng-click="showScoreData = !showScoreData">隐藏</a>
                <table  class="table-bordered text-center" ng-if="showScoreData">
                    <tr ng-show="ishotel">
                        <td>酒店名称</td>
                        <td>星级</td>
                        <td>价格</td>
                        <td>分数</td>
                        <td>原因</td>
                        <td>经度</td>
                        <td>纬度</td>
                    </tr>
                    <tr  ng-repeat="x in originData.markedData" ng-show="ishotel">
                        <!--酒店的数据-->
                        <td>{{x.name}}</td>
                        <td>{{x.star}}</td>
                        <td>{{x.price}}</td>
                        <td>{{x.score}}</td>
                        <td>
                            <div ng-repeat="reason in x.reasons">{{reason}}</div>
                        </td>
                        <td>{{x.longitude}}</td>
                        <td>{{x.latitude}}</td>
                    </tr>
                    <tr ng-show="!ishotel">
                        <td colspan="8" style="font-size: 24px;background-color: #00EACF">航班的数据</td>
                    </tr>
                    <tr ng-show="!ishotel">
                        <td>航班号</td>
                        <td>始发地</td>
                        <td>目的地</td>
                        <td>航班价格</td>
                        <td>分数</td>
                        <td>原因</td>
                        <td>出发时间</td>
                        <td>到达时间</td>
                    </tr>
                    <tr ng-repeat="x in originData.markedData" ng-show="!ishotel&&x.originPlace.type!=2">
                        <!--航班的数据-->
                        <td>{{x.No}}</td>
                        <td>{{x.originPlace}}</td>
                        <td>{{x.destination}}</td>
                        <td>{{x.price}}</td>
                        <td>{{x.score}}</td>
                        <td>
                            <div ng-repeat="reason in x.reasons">{{reason}}</div>
                        </td>
                        <td>{{x.departDateTime}}</td>
                        <td>{{x.arrivalDateTime}}</td>
                    </tr>
                </table>
                <table class="table-bordered text-center" style="margin-top: 150px" ng-if="showScoreData">
                    <tr ng-show="!ishotel">
                        <td colspan="10" style="font-size: 24px;background-color: #00EACF">火车的数据</td>
                    </tr>
                    <tr ng-show="!ishotel">
                        <td>车次</td>
                        <td>价格</td>
                        <td>分数</td>
                        <td>原因</td>
                        <td>出发地</td>
                        <td>到达地</td>
                        <td>出发时间</td>
                        <td>到达时间</td>
                        <td>时长</td>
                        <td>剩余数</td>
                    </tr>
                    <tr ng-repeat="x in originData.markedData" ng-show="!ishotel&&x.type!=1">
                        <!--火车的数据-->
                        <td>{{x.No}}</td>
                        <td>{{x.price}}</td>
                        <td>{{x.score}}</td>
                        <td>
                            <div ng-repeat="reason in x.reasons">{{reason}}</div>
                        </td>
                        <td>{{x.originStation}}</td>
                        <td>{{x.destinationStation}}</td>
                        <td>{{x.departDateTime}}</td>
                        <td>{{x.arrivalDateTime}}</td>
                        <td>{{x.duration}}</td>
                        <td>{{x.remainNum}}</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <th>使用策略</th>
            <td>
                <select ng-model="policy">
                    <option value="default">默认策略</option>
                    <option value="bmw">最高价策略</option>
                </select>
            </td>
        </tr>
        <tr>
            <th>打分详情</th>
            <td>
                <div placeholder="打分详情" ng-if="hideScoreDetail">
                    <table class="son">
                        <tr ng-repeat="prefer in ori_prefers" style="height:50px">
                            <td style="color: #4A4EC1;padding-right: 5px">{{$index}}</td>
                            <td style="padding-right: 15px">{{prefer.name}}</td>
                            <!--<td><input type="text" style="width:1200px" ng-model="prefer.options" value="{{prefer.options}}"></td>-->
                            <td ng-repeat="(x,y) in prefer.options">
                                    {{x}}
                                <input style="width:auto" ng-model="prefer.options[x]" type="text">
                            </td>
                            <td style="padding-left: 15px;color: #9e0505" ng-click="delete($index)">删除</td>
                        </tr>
                    </table>
                </div>
                <a ng-show="hideScoreDetail" ng-click="hideScoreDetail = !hideScoreDetail">隐藏</a>
                <a ng-hide="hideScoreDetail" ng-click="hideScoreDetail = !hideScoreDetail">显示</a>
                <br/>
                <select ng-model="prefer" ng-change="change()">
                    <option ng-repeat="x in prefers" value="{{x.value}}">{{x.title}}</option>
                </select>
            </td>
        </tr>
        <tr>
            <th>预算结果</th>
            <td>
                <div placeholder="预算结果" rows="4" cols="80" ng-if="hideCalResult">
                    <div>{{result.name}}</div>
                    <div>{{result.price}}</div>
                    <div>{{result.star}}</div>
                    <div>{{result.agent}}</div>
                </div>
                <a ng-show="hideCalResult" ng-click="hideCalResult = !hideCalResult">隐藏</a>
                <a ng-hide="hideCalResult" ng-click="hideCalResult = !hideCalResult">显示</a>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="button" class="btn btn-primary" value="获取预算" id="calBudgetBtn" ng-click="getBudget()"/>
            </td>
        </tr>
    </tbody>
</table>
<script src="./index.js"></script>
</body>
</html>